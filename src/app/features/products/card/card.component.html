<div class="product-card">
  <div class="w-[280px] h-[450px] overflow-hidden bg-white rounded-lg shadow-md hover:shadow-xl transition-all duration-300 flex flex-col">
    <a class="product-image-link" [routerLink]="['/products', product().id]">
      <div>
        <img
          [src]="product().imgUrl"
          alt="Product image"
        />
      </div>
    </a>

    <div class="px-4 py-3 flex flex-col gap-2.5 flex-grow">
      <!-- Categoría y Marca -->
      <div class="flex items-center gap-1.5 flex-wrap">
        @if (product().category) {
          <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-md font-medium text-[10px]">
            {{ product().category?.name }}
          </span>
        } @else {
          <span class="bg-gray-100 text-gray-600 px-2 py-1 rounded-md font-medium text-[10px]">No category</span>
        }
        @if (product().brand) {
          <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-md font-medium text-[10px]">
            {{ product().brand?.name }}
          </span>
        }
      </div>

      <!-- Nombre del producto -->
      <div class="min-h-[40px]">
        <a [routerLink]="['/products', product().id]"
           class="text-sm font-bold text-gray-800 hover:text-primary-default transition-colors line-clamp-2 block">
          {{ product().name }}
        </a>
      </div>

      <!-- Código del producto -->
      <p class="text-[10px] text-gray-500 -mt-1">Code: <span class="font-mono">{{ product().code }}</span></p>

      <!-- Descripción -->
      <p class="text-xs text-gray-600 line-clamp-2 flex-grow">{{ product().description }}</p>
      <app-add-to-cart (addToCartEvent)="onAddToCart()" />
    </div>

    <!-- Precios -->
    <div class="px-4 pb-3 pt-2 border-t border-gray-100">
      <div class="flex items-center justify-between">
        <div class="flex flex-col gap-0.5">
          @if (product().salePrice !== product().price) {
            <p class="text-[10px] text-gray-400 line-through">{{ product().price | currency:'USD':'symbol':'1.2-2': 'es' }}</p>
            <div class="flex items-center gap-1.5">
              <p class="text-lg font-bold text-primary-default">{{ product().salePrice | currency:'USD':'symbol':'1.2-2': 'es' }}</p>
              <span class="text-[9px] bg-primary-default text-white px-1.5 py-0.5 rounded font-semibold">SALE</span>
            </div>
          } @else {
            <p class="text-lg font-bold text-primary-default">{{ product().price | currency:'USD':'symbol':'1.2-2': 'es' }}</p>
          }
        </div>
      </div>
    </div>
  </div>
</div>