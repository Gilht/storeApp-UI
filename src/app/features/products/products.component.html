<section class="product-container">
  <!-- Barra de búsqueda -->
  <div class="search-container mb-8 max-w-2xl mx-auto">
    <div class="relative">
      <input
        type="text"
        (input)="onSearch($event)"
        [value]="searchTerm()"
        placeholder="Buscar por nombre, código, categoría o marca..."
        class="w-full px-4 py-3 pl-12 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"
      />
      <svg class="absolute left-4 top-3.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
    </div>
    <p class="text-sm text-gray-600 mt-2 text-center">
      Mostrando {{ products().length }} de {{ totalProducts() }} productos
    </p>
  </div>

  <!-- Grid de productos -->
  <div class="product-grid mb-8">
    @if (isLoading()) {
      <!-- Skeleton loaders -->
      @for (item of [1,2,3,4,5,6,7,8,9,10]; track item) {
        <app-product-skeleton />
      }
    } @else {
      @for (product of products(); track product.id) {
        <app-card
          (addToCartEvent)="onAddToCart($event)"
          data-testid="product-card"
          class="product-card"
          [product]="product">
        </app-card>
      } @empty {
        <div class="col-span-full text-center py-16">
          <p class="text-2xl text-gray-400">No se encontraron productos</p>
          <p class="text-gray-500 mt-2">Intenta con otros términos de búsqueda</p>
        </div>
      }
    }
  </div>

  <!-- Controles de paginación -->
  @if (totalPages() > 1) {
    <div class="pagination-container flex items-center justify-center gap-2 mt-8 pb-8">
      <!-- Botón anterior -->
      <button
        (click)="onPreviousPage()"
        [disabled]="currentPage() === 0"
        class="px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:hover:bg-white">
        <span class="flex items-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          Anterior
        </span>
      </button>

      <!-- Números de página -->
      <div class="flex gap-1">
        @for (page of getPageNumbers(); track page) {
          <button
            (click)="onGoToPage(page)"
            [class.bg-blue-500]="currentPage() === page"
            [class.text-white]="currentPage() === page"
            [class.bg-white]="currentPage() !== page"
            [class.text-gray-700]="currentPage() !== page"
            class="w-10 h-10 rounded-lg font-medium border border-gray-300 hover:bg-blue-100 transition-all duration-200">
            {{ page + 1 }}
          </button>
        }
      </div>

      <!-- Botón siguiente -->
      <button
        (click)="onNextPage()"
        [disabled]="currentPage() >= totalPages() - 1"
        class="px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:hover:bg-white">
        <span class="flex items-center gap-2">
          Siguiente
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </span>
      </button>
    </div>

    <!-- Info de página actual -->
    <div class="text-center text-sm text-gray-600 pb-4">
      Página {{ currentPage() + 1 }} de {{ totalPages() }}
    </div>
  }
</section>